{
  "inputs": [
    {
      "Redis": {
        "host": "192.168.1.157",
        "port": 30464,
        "password": "PrW=plrmBA$XGzJ)",
        "channels": [
          "microservices"
        ],
        "type": "microservices",
        "enableMeter": true,
        "codec": "json"
      }
    }
  ],
  "filters": [
    {
      "JavaScript": {
        "condition": "event['@fields'] ? true : false",
        "customFunctionPath": "D:\\tube\\config\\filter.js"
      },
      "Geoip2": {
        "condition": "event['remote_addr'] ? true : false",
        "ip": "remote_addr"
      },
      "Remove": {
        "fields": [
          "@fields",
          "@message"
        ]
      }
    }
  ],
  "outputs": [
    {
      "ElasticSearch": {
        "hosts": [
          "192.168.1.187:9200"
        ],
        "index": "tube-${source}-%{YYYY.MM.dd}",
        "enableMeter": true,
        "bulkSize": 100
      }
    }
  ]
}
